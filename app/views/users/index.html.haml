%head
  %script{:type => "text/javascript", :src=> "https://code.jquery.com/jquery-3.4.1.js", :integrity=> "sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=", :crossorigin=> "anonymous"}
  %script{:type => "text/javascript", :src=> "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js", :integrity=> "sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM", :crossorigin=> "anonymous"}
  %link{:rel => :stylesheet, :type => "text/css", :href => "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css", :crossorigin=>"anonymous"}
  %link{:rel => :stylesheet, :type => "text/css", :href => "https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css", :crossorigin=>"anonymous"}
  = stylesheet_link_tag "application"
    
%div.d-flex.flex-row 
  %div.col-6
    %h2 Approved Users
    
%table#userTable.table.table-striped.table-bordered.table-lg
  %thead
    %tr
      %th Email
      %th Created At
      %th Administrator
      %th View
      %th Edit
      %th Add
      %th Delete
      
  %tbody
    - @users.each do |user|
      %tr
        %td= user.email
        %td= user.created_at
        %td= user.admin
        %td= user.can_view
        %td= user.can_edit
        %td= user.can_add
        %td= user.can_delete
        
%script{:type => "text/javascript", :src => "https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"}
%script{:type => "text/javascript", :src => "https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"}
:javascript
  $(document).ready(function () {
    var simple_checkbox = function (data, type, full, meta) {
      var is_checked = (data === 'true') ? "checked" : "";
      // console.log("DATA: " + is_checked);
      return '<input type="checkbox" class="checkbox" ' + is_checked + ' />';
    }
    
    var dataTable = $('#userTable').dataTable({
      "pageLength": 50,
      "search": {
        "caseInsensitive": true
      },
      "stateSave" : true,
      "columns": [
          { "data": "Email"},
          { "data": "Created At"},
          { "data": "Administrator", "render": simple_checkbox, "className": "text-center"},
          { "data": "View", "render": simple_checkbox, "className": "text-center"},
          { "data": "Edit", "render": simple_checkbox, "className": "text-center"},
          { "data": "Add", "render": simple_checkbox, "className": "text-center"},
          { "data": "Delete", "render": simple_checkbox, "className": "text-center"}
      ],
    });
    $('.dataTables_length').addClass('bs-select');
  });


// references
// Styling - https://codepen.io/cristinaconacel/pen/zmgmxE
// Checkboxes - http://live.datatables.net/kovegexo/1/edit
//            - https://stackoverflow.com/questions/27276108/best-way-to-render-boolean-data-columns-in-jquery-datatables-net